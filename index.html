<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hikari AI — Landing + Sesión Animada</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#000;
    --text:#fff;
    --muted:#bfbfbf;
    --glass: rgba(255,255,255,0.03);
    --panel: rgba(255,255,255,0.02);
    --accent:#f6f6f6;
    --tone:#ffdd57;
  }

  /* Accessibility: respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
  }

  /* Reset ligero */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:"Inter",system-ui,Roboto,Arial;
    background:var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
    scroll-behavior:smooth;
  }

  /* Basic layout */
  .wrap{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:flex-start;
    padding:28px 48px;
    gap:28px;
    opacity:0;
    animation:fadeInUp .9s cubic-bezier(.2,.9,.3,1) .08s forwards;
  }

  @keyframes fadeInUp{
    from{opacity:0; transform:translateY(10px)}
    to{opacity:1; transform:translateY(0)}
  }

  nav{display:flex; gap:48px; align-items:center; font-weight:600; transform:translateY(-6px); opacity:0; animation:navAppear .7s .12s forwards;}
  nav a{color:var(--text); text-decoration:none; font-size:18px; position:relative; padding:6px 2px;}
  nav a::after{content:""; position:absolute; left:0; bottom:-6px; height:2px; width:0; background:var(--accent); transition:width .28s;}
  nav a:hover::after{width:100%;}
  @keyframes navAppear{to{transform:none; opacity:1}}

  /* Hero */
  .hero{
    display:flex;
    gap:40px;
    align-items:center;
    justify-content:space-between;
    margin-top:8px;
  }
  .left{flex:1; max-width:900px;}
  h1{margin:0; font-weight:800; line-height:0.95; font-size:92px; color:var(--text); letter-spacing:-1px;}
  h1 .thin{font-weight:300; display:block; opacity:.95; transform:translateX(-6px); animation:staggerIn .6s .05s cubic-bezier(.2,.9,.3,1) forwards;}
  h1 .big{display:block; transform:translateX(-6px); opacity:0; animation:staggerIn .6s .12s cubic-bezier(.2,.9,.3,1) forwards;}
  @keyframes staggerIn{to{transform:none; opacity:1}}

  /* Right column with avatar */
  .right{width:420px; display:flex; flex-direction:column; align-items:center; gap:18px; position:relative;}
  .avatar-wrap{
    width:420px; border-top:4px solid rgba(255,255,255,0.12); padding-top:10px; display:flex; justify-content:center;
    transform:translateY(20px); opacity:0; animation:avatarIn .9s .28s cubic-bezier(.2,.9,.3,1) forwards;
  }
  @keyframes avatarIn{to{transform:none; opacity:1}}

  .avatar{
    width:320px; max-width:100%; display:block; transform-origin:center;
    animation:float 4.8s ease-in-out infinite, popIn .5s .28s both;
    box-shadow: 0 20px 40px rgba(0,0,0,0.6);
    border-radius:6px;
  }
  @keyframes popIn{from{transform:scale(.96); opacity:0} to{transform:scale(1); opacity:1}}
  @keyframes float{
    0%{transform:translateY(-4px)}
    50%{transform:translateY(6px)}
    100%{transform:translateY(-4px)}
  }

  .cta-frame{background:transparent; border:2px solid rgba(255,255,255,0.12); padding:12px 18px; display:inline-block; margin-top:6px; transform:translateY(6px); opacity:0; animation:fadeInUp .6s .36s forwards;}
  .cta{display:inline-block; background:var(--accent); color:#111; padding:12px 22px; border-radius:10px; font-weight:800; text-decoration:none; box-shadow:0 6px 0 rgba(0,0,0,0.25); transition:transform .18s cubic-bezier(.2,.9,.3,1), box-shadow .18s; will-change:transform,box-shadow;}
  .cta:hover{transform:translateY(-6px); box-shadow:0 14px 24px rgba(0,0,0,0.4)}
  .cta:active{transform:translateY(-2px)}

  /* Bottom outline buttons */
  .bottom-actions{display:flex; gap:18px; margin-top:56px; align-items:center; opacity:0; transform:translateY(10px); animation:fadeInUp .6s .44s forwards;}
  .outline-btn{border:2px solid rgba(255,255,255,0.16); padding:18px 28px; min-width:260px; text-align:center; background:transparent; color:var(--text); font-weight:600; border-radius:8px; display:flex; align-items:center; justify-content:center; gap:12px; transition:transform .18s, background .18s, box-shadow .18s;}
  .outline-btn:hover{transform:translateY(-6px); background:rgba(255,255,255,0.02); box-shadow:0 10px 30px rgba(0,0,0,0.6)}
  .store-badge{height:36px}

  /* SESIÓN OCULTA */
  .session {
    position:fixed; inset:0; background: linear-gradient(180deg, rgba(0,0,0,0.96), rgba(0,0,0,0.99)); color:var(--text);
    z-index:120; display:none; flex-direction:column; padding:18px 22px; gap:12px;
    transform:translateY(24px); opacity:0; transition:all .36s cubic-bezier(.2,.9,.3,1);
  }
  .session.show{display:flex; transform:none; opacity:1; animation:sessionPop .36s cubic-bezier(.2,.9,.3,1) both;}
  @keyframes sessionPop{from{transform:scale(.98); opacity:0} to{transform:none; opacity:1}}

  .session-header{display:flex; align-items:center; gap:16px; justify-content:space-between;}
  .session-title{font-weight:800; font-size:18px; letter-spacing:.2px; display:flex; align-items:center; gap:10px}
  .meta{color:var(--muted); font-size:13px}

  .session-controls{display:flex; gap:8px; align-items:center;}

  /* Searchbar animated */
  .searchbar{
    display:flex; gap:12px; align-items:center; background:var(--glass); padding:10px 12px; border-radius:12px; min-width:320px; border:1px solid rgba(255,255,255,0.04); transition:box-shadow .18s;
  }
  .searchbar:focus-within{box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  .searchbar input{background:transparent; border:0; outline:0; color:var(--text); font-size:15px; width:420px; transition:width .28s;}
  .searchbar input::placeholder{color:rgba(255,255,255,0.34)}
  .searchbar input:focus{width:620px}
  .loader{width:16px; height:16px; border-radius:50%; border:2px solid rgba(255,255,255,0.08); border-top-color:var(--accent); animation:spin 1s linear infinite; opacity:0; transform:translateY(-2px);}
  .loader.show{opacity:1}
  @keyframes spin{to{transform:rotate(360deg)}}

  .pill{background:transparent; border:1px solid rgba(255,255,255,0.06); padding:8px 10px; border-radius:8px; cursor:pointer; font-size:14px; transition:transform .15s, background .12s, border-color .12s;}
  .pill:hover{transform:translateY(-4px); border-color:rgba(255,255,255,0.12)}
  .pill.active{background:linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border-color:rgba(255,255,255,0.18); transform:translateY(-2px)}

  /* grid */
  .tool-grid{
    margin-top:10px; display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap:12px; align-items:start;
    overflow:auto; padding:12px; height:calc(100vh - 150px); border-top:1px solid rgba(255,255,255,0.03);
  }
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.05); padding:12px; border-radius:12px; display:flex; flex-direction:column; gap:8px;
    transform:translateY(18px) scale(.99); opacity:0; animation:cardIn .42s ease forwards;
    transition:transform .22s cubic-bezier(.2,.9,.3,1), box-shadow .22s;
  }
  .card:hover{transform:translateY(-6px) scale(1.01); box-shadow:0 28px 60px rgba(0,0,0,0.6)}
  @keyframes cardIn{to{transform:none; opacity:1}}

  .icon{width:48px; height:48px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center; font-weight:700; color:#111; background:#fff; box-shadow: 0 2px 0 rgba(0,0,0,0.2); font-size:14px;}
  .card h3{margin:0; font-size:15px; letter-spacing:-.2px}
  .card p{margin:0; font-size:13px; color:var(--muted); min-height:38px;}
  .tags{display:flex; gap:6px; flex-wrap:wrap;}
  .tag{font-size:11px; padding:4px 6px; border-radius:8px; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.02); color:var(--muted); transform:scale(.96); opacity:0; animation:tagPop .28s .12s both;}
  @keyframes tagPop{to{transform:none; opacity:1}}

  .actions{display:flex; gap:8px; margin-top:6px; justify-content:space-between;}
  .btn{background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.04); padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:700; color:var(--text); transition:transform .12s;}
  .btn:hover{transform:translateY(-3px)}
  .btn.primary{background:var(--accent); color:#111; border:none; box-shadow:0 6px 0 rgba(0,0,0,0.2)}

  /* modal */
  .modal-back{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:200;}
  .modal-back.show{display:flex; background:rgba(0,0,0,0.6); animation:backFade .24s}
  @keyframes backFade{from{opacity:0} to{opacity:1}}
  .modal{width:760px; max-width:92%; background:var(--bg); border:1px solid rgba(255,255,255,0.06); padding:18px; border-radius:12px; color:var(--text); transform:scale(.96); opacity:0; animation:modalIn .28s forwards;}
  @keyframes modalIn{to{transform:none; opacity:1}}
  .close-x{cursor:pointer; padding:8px; transition:transform .12s}
  .close-x:hover{transform:rotate(12deg) scale(1.03)}

  /* tiny helper */
  .tiny{font-size:12px; color:var(--muted)}

  /* responsive */
  @media (max-width:1100px){ h1{font-size:64px} .right{width:360px} .avatar{width:260px} .searchbar input:focus{width:260px} }
  @media (max-width:720px){
    h1{font-size:44px}
    .hero{flex-direction:column; align-items:flex-start}
    .avatar-wrap{width:100%; display:flex; justify-content:flex-end}
    .avatar{width:220px}
    .searchbar input{width:160px}
    .tool-grid{height:calc(100vh - 220px)}
  }
</style>
</head>
<body>
  <div class="wrap" id="main-wrap">
    <nav>
      <a href="#">Nosotros</a>
      <a href="#">Como<br>empezar</a>
    </nav>

    <main class="hero" role="main" aria-labelledby="hero-title">
      <div class="left">
        <span class="eyebrow tiny"> </span>
        <h1 id="hero-title">
          <span class="thin">¿Listo/a para</span>
          <span class="big">explorar con</span>
          <span class="big">Hikari AI?</span>
        </h1>
      </div>

      <aside class="right" aria-label="Imagen y llamada a la acción">
        <div class="avatar-wrap" aria-hidden="true">
          <!-- Imagen principal: pon hikari.png en la carpeta -->
          <img src="hikari.png" alt="Ilustración de personaje Hikari" class="avatar" />
        </div>

        <div style="width:100%; display:flex; justify-content:center;">
          <div class="cta-frame" role="button" aria-label="Entrar">
            <a class="cta" id="enter-btn" href="#explorar">¡Entra YA!</a>
          </div>
        </div>
      </aside>
    </main>

    <section class="bottom-actions" aria-label="Enlaces de tienda y mensaje">
      <div class="outline-btn">
        <span>¡Todo lo que busque es un solo lugar!</span>
      </div>

      <div class="outline-btn" onclick="fakeLink('appstore')">
        <span style="flex:1; text-align:center;"> </span>
        <img src="appstore.png" alt="Pronto en App Store" class="store-badge" />
      </div>

      <div class="outline-btn" onclick="fakeLink('playstore')">
        <img src="playstore.png" alt="Pronto en Google Play" class="store-badge" />
      </div>
    </section>
  </div>

  <!-- SESIÓN OCULTA -->
  <div class="session" id="session" aria-hidden="true">
    <div class="session-header">
      <div style="display:flex; align-items:center; gap:12px;">
        <div class="session-title">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.9"><path d="M12 2v20" stroke="white" stroke-width="1.6" stroke-linecap="round"/></svg>
          Sesión — Herramientas (modo: reguero)
        </div>
        <div class="meta" id="meta-count">Generando herramientas…</div>
      </div>

      <div class="session-controls">
        <div class="searchbar" title="Buscar">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="white" stroke-width="1.6" stroke-linecap="round"/></svg>
          <input id="search" placeholder="Buscar herramienta, tag o función..." aria-label="Buscar" />
          <div id="loader" class="loader" title="Cargando"></div>
        </div>

        <div class="pill" id="sortBtn" role="button" aria-pressed="false">Ordenar: Relevancia</div>
        <div class="pill" id="closeSession" role="button" title="Cerrar sesión">Cerrar ✕</div>
      </div>
    </div>

    <!-- filtros -->
    <div style="display:flex; gap:8px; align-items:center;">
      <div class="pill filter" data-filter="Analizador">Analizador</div>
      <div class="pill filter" data-filter="Generador">Generador</div>
      <div class="pill filter" data-filter="Transformador">Transformador</div>
      <div class="pill filter" data-filter="Integrador">Integrador</div>
      <div class="pill filter" data-filter="Utilidad">Utilidad</div>
      <div style="flex:1"></div>
      <div class="meta" id="visible-count">0 visibles</div>
    </div>

    <div class="tool-grid" id="toolGrid" tabindex="0" aria-live="polite">
      <!-- tarjetas generadas dinámicamente -->
    </div>
  </div>

  <!-- modal -->
  <div class="modal-back" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2 id="modalTitle">Herramienta</h2>
        <div class="close-x" id="modalClose" role="button" title="Cerrar">Cerrar ✕</div>
      </div>
      <p id="modalDesc">Descripción...</p>
      <div style="display:flex; gap:8px; margin-top:12px; justify-content:flex-end;">
        <button class="btn" id="modalDemo">Demo</button>
        <button class="btn primary" id="modalOpen">Abrir herramienta</button>
      </div>
    </div>
  </div>

<script>
/* ---------------------------
   Comportamiento (con animaciones)
   --------------------------- */

/* Elementos */
const sessionEl = document.getElementById('session');
const enterBtn = document.getElementById('enter-btn');
const closeSession = document.getElementById('closeSession');
const toolGrid = document.getElementById('toolGrid');
const metaCount = document.getElementById('meta-count');
const visibleCount = document.getElementById('visible-count');
const loader = document.getElementById('loader');
const searchInput = document.getElementById('search');
const sortBtn = document.getElementById('sortBtn');
const modalBack = document.getElementById('modalBack');
const modalTitle = document.getElementById('modalTitle');
const modalDesc = document.getElementById('modalDesc');
const modalOpen = document.getElementById('modalOpen');
const modalDemo = document.getElementById('modalDemo');
const modalClose = document.getElementById('modalClose');

let totalGenerated = 0;
let generatedItems = [];
let visibleItems = [];
let isGenerating = false;
let batchSize = 60;
let maxSimulated = 200000;
let domRendered = 0;
const renderBatchSize = 40;

/* Helper randomness */
const TAGS = ['Analizador','Generador','Transformador','Integrador','Utilidad','Data','NLP','Vision','Audio','Automatización','Script','QA','Ops'];
function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
function makeTool(id){
  const base = ['AutoPrompt','BatchForge','InsightMiner','CodeWeaver','QuickParse','VisionSlice','AudioGlue','FlowMatic','SpecSynth','PromptTuner','ChainBinder','Formator','DataPolish','RegexGolem','LayoutWizard'];
  const verb = base[id % base.length];
  const name = `${verb} · ${String(id).padStart(5,'0')}`;
  const tags = [];
  const tcount = randInt(1,3);
  const used = {};
  for(let i=0;i<tcount;i++){
    let t = TAGS[randInt(0,TAGS.length-1)];
    if(used[t]) continue;
    used[t]=1; tags.push(t);
  }
  const desc = `Herramienta ${name} — sirve para ${tags.join(', ')}. Ideal para flujos automáticos y productividad a escala.`;
  return { id, name, tags, desc, iconText: name.split(' ')[0].slice(0,2).toUpperCase() };
}

/* Generación perezosa (micro-lotes) */
function generateBatch(count, cb){
  if(isGenerating) return;
  isGenerating = true;
  const start = totalGenerated + 1;
  const end = Math.min(totalGenerated + count, maxSimulated);
  let i = start;
  function chunk(){
    const chunkSize = 200;
    for(let k=0;k<chunkSize && i<=end; k++, i++){
      generatedItems.push(makeTool(i));
    }
    totalGenerated = generatedItems.length;
    metaCount.textContent = `Generadas: ${totalGenerated.toLocaleString()}`;
    if(i <= end){
      requestAnimationFrame(chunk);
    } else {
      isGenerating = false;
      if(cb) cb();
    }
  }
  requestAnimationFrame(chunk);
}

/* Render visible y paginado en DOM */
function applyFiltersAndRender(){
  const q = (searchInput.value || '').trim().toLowerCase();
  const activeFilters = Array.from(document.querySelectorAll('.filter.active')).map(el=>el.dataset.filter);
  visibleItems = generatedItems.filter(item=>{
    if(q){
      const hay = item.name.toLowerCase().includes(q) || item.desc.toLowerCase().includes(q) || item.tags.join(' ').toLowerCase().includes(q);
      if(!hay) return false;
    }
    if(activeFilters.length){
      if(!item.tags.some(t => activeFilters.includes(t))) return false;
    }
    return true;
  });
  visibleCount.textContent = `${visibleItems.length.toLocaleString()} visibles`;
  domRendered = 0;
  toolGrid.innerHTML = '';
  renderMore();
}

/* Añade más tarjetas al DOM con efecto stagger */
function renderMore(){
  if(domRendered >= visibleItems.length) return;
  const slice = visibleItems.slice(domRendered, domRendered + renderBatchSize);
  const frag = document.createDocumentFragment();
  slice.forEach((item, idx)=>{
    const card = makeCard(item);
    // delay para efecto cascada
    card.style.animationDelay = `${(domRendered + idx) * 12}ms`;
    frag.appendChild(card);
  });
  toolGrid.appendChild(frag);
  domRendered += slice.length;
  visibleCount.textContent = `${visibleItems.length.toLocaleString()} visibles · mostrando ${domRendered.toLocaleString()}`;
}

/* Crear tarjeta DOM */
function makeCard(item){
  const el = document.createElement('div');
  el.className = 'card';
  el.dataset.id = item.id;
  el.innerHTML = `
    <div style="display:flex; gap:10px; align-items:center;">
      <div class="icon" aria-hidden="true" style="background:${colorFromId(item.id)}">${escapeHtml(item.iconText)}</div>
      <div style="flex:1;">
        <h3>${escapeHtml(item.name)}</h3>
        <div class="tags">${item.tags.map(t=>`<span class="tag">${escapeHtml(t)}</span>`).join('')}</div>
      </div>
    </div>
    <p>${escapeHtml(item.desc)}</p>
    <div class="actions">
      <div style="display:flex; gap:8px;">
        <button class="btn demoBtn" data-id="${item.id}">Demo</button>
        <button class="btn primary openBtn" data-id="${item.id}">Abrir</button>
      </div>
      <div style="color:var(--muted); font-size:12px;">ID ${item.id}</div>
    </div>
  `;
  el.querySelector('.openBtn').addEventListener('click', ()=> openModal(item));
  el.querySelector('.demoBtn').addEventListener('click', ()=> quickDemo(item));
  return el;
}

/* Modal */
function openModal(item){
  modalTitle.textContent = item.name;
  modalDesc.textContent = item.desc + ' — Esta es una demo local; integrar APIs requiere backend.';
  modalBack.classList.add('show');
  modalBack.setAttribute('aria-hidden','false');
  modalOpen.onclick = ()=> {
    modalBack.classList.remove('show');
    modalBack.setAttribute('aria-hidden','true');
    alert(`Abriendo herramienta: ${item.name}\n(En esta demo, abrir = mostrar info)`);
  };
  modalDemo.onclick = ()=> { quickDemo(item); };
}

function quickDemo(item){
  // demo minimal: new window con info (simula abrir)
  const w = window.open('', '_blank', 'noopener,noreferrer,width=720,height=560');
  if(!w){ alert(`Demo de ${item.name}\nTags: ${item.tags.join(', ')}\n\n(Allowed popup blocked?)`); return; }
  w.document.write(`<body style="font-family:Inter,Arial;background:#000;color:#fff;padding:18px;"><h2>${escapeHtml(item.name)}</h2><p style="color:#ccc;">${escapeHtml(item.desc)}</p><pre style="color:#aaf;background:#001;padding:12px;border-radius:8px;">Simulación rápida de herramienta: ${escapeHtml(item.name)}</pre></body>`);
}

/* Color helper */
function colorFromId(id){
  const hue = (id * 47) % 360;
  return `hsl(${hue} 65% 75%)`;
}
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, (m)=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

/* Scroll infinito */
toolGrid.addEventListener('scroll', ()=>{
  const el = toolGrid;
  if(el.scrollTop + el.clientHeight > el.scrollHeight - 800){
    renderMore();
  }
});

/* Entra: abre sesión con animación y empieza a generar */
enterBtn.addEventListener('click', function(e){
  e.preventDefault();
  document.getElementById('main-wrap').style.display = 'none';
  sessionEl.classList.add('show');
  sessionEl.setAttribute('aria-hidden','false');
  if(generatedItems.length === 0){
    loader.classList.add('show');
    generateBatch(500, ()=>{
      loader.classList.remove('show');
      applyFiltersAndRender();
      scheduleBackgroundGeneration();
    });
  } else {
    applyFiltersAndRender();
  }
});

/* cerrar sesión */
closeSession.addEventListener('click', ()=>{
  sessionEl.classList.remove('show');
  sessionEl.setAttribute('aria-hidden','true');
  document.getElementById('main-wrap').style.display = 'block';
  window.scrollTo({top:0, behavior:'smooth'});
});

/* filtros toggle */
document.querySelectorAll('.filter').forEach(el=>{
  el.addEventListener('click', ()=>{
    el.classList.toggle('active');
    el.setAttribute('aria-pressed', el.classList.contains('active'));
    applyFiltersAndRender();
  });
});

/* búsqueda con debounce y animación loader */
let debounceTimer = null;
searchInput.addEventListener('input', ()=>{
  if(debounceTimer) clearTimeout(debounceTimer);
  loader.classList.add('show');
  debounceTimer = setTimeout(()=>{
    applyFiltersAndRender();
    loader.classList.remove('show');
  }, 220);
});

/* ordenar (simulación) */
sortBtn.addEventListener('click', ()=>{
  if(sortBtn.textContent.includes('Relevancia')){
    sortBtn.textContent = 'Ordenar: ID asc';
    generatedItems.sort((a,b)=>a.id-b.id);
  } else {
    sortBtn.textContent = 'Ordenar: Relevancia';
    generatedItems.sort(()=>Math.random()-0.5);
  }
  applyFiltersAndRender();
});

/* background generation por lotes */
let generatorId = 0;
function scheduleBackgroundGeneration(){
  generatorId++;
  const thisId = generatorId;
  function step(){
    if(thisId !== generatorId) return;
    if(totalGenerated >= maxSimulated) return;
    generateBatch(batchSize, ()=>{
      applyFiltersAndRender();
      setTimeout(step, 1200 + Math.random()*1000);
    });
  }
  setTimeout(step, 700);
}

/* inicial: pre-genera unos pocos para respuesta rápido */
generateBatch(120, ()=>{ metaCount.textContent = `Generadas: ${totalGenerated.toLocaleString()}`; applyFiltersAndRender(); });

/* modal close handlers */
modalClose.addEventListener('click', ()=> { modalBack.classList.remove('show'); modalBack.setAttribute('aria-hidden','true'); });
modalBack.addEventListener('click', (e)=> { if(e.target === modalBack) { modalBack.classList.remove('show'); modalBack.setAttribute('aria-hidden','true'); } });

/* ESC handling */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape'){
    if(modalBack.classList.contains('show')) { modalBack.classList.remove('show'); modalBack.setAttribute('aria-hidden','true'); }
    else if(sessionEl.classList.contains('show')) { sessionEl.classList.remove('show'); sessionEl.setAttribute('aria-hidden','true'); document.getElementById('main-wrap').style.display = 'block'; }
  }
});

/* fake links */
function fakeLink(which){
  if(which === 'appstore') alert('Pronto en App Store — todavía no disponible.');
  else alert('Pronto en Google Play — todavía no disponible.');
}

/* Accessibility: Enter on CTA */
document.getElementById('enter-btn').addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){ e.preventDefault(); e.target.click(); } });
</script>
</body>
</html>
